import{A as e,C as t,c as o,o as r,i as a}from"./index.3d3216c0.js";import{v as l,G as n,q as s,U as c,s as i,Z as u,ag as f}from"./vendor.56ae3a09.js";var p=Object.defineProperty,m=Object.defineProperties,v=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,g=(e,t,o)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;const h=t=>n((()=>{const o=t.value;return null===o?null:e(o)?o:o.$el}));function y({offset:e,arrow:t,arrowOffset:o,showArrow:r},a=[]){const l=[{name:"offset",options:{offset:e}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}}];return r&&l.push({name:"arrow",options:{element:t,padding:null!=o?o:5}}),l.push(...a),l}const O=e=>{const{placement:t,popperOptions:o,offset:r,arrow:a,arrowOffset:l,showArrow:n}=e;return s=((e,t)=>{for(var o in t||(t={}))d.call(t,o)&&g(e,o,t[o]);if(b)for(var o of b(t))w.call(t,o)&&g(e,o,t[o]);return e})({placement:t},o),c={modifiers:y({offset:r,arrow:a,arrowOffset:l,showArrow:n},null==o?void 0:o.modifiers)},m(s,v(c));var s,c};var j=Object.defineProperty,E=Object.defineProperties,P=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,T=(e,t,o)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;const A=e=>{const o=l(null),p=l(null),m=l(null),v=h(o),b=h(p),d=h(m);let w=null,g=null,y=null;const j=s(e);let A=null;const R=()=>{A&&A(),A=i((()=>{w&&a(window,"scroll",C);const e=v.value,t=b.value,o=d.value;if(!e||!t)return;const l=O((n=((e,t)=>{for(var o in t||(t={}))x.call(t,o)&&T(e,o,t[o]);if(k)for(var o of k(t))D.call(t,o)&&T(e,o,t[o]);return e})({},j),E(n,P({arrow:o}))));var n;w=u(e,t,l),w.update(),r(window,"scroll",C)}))},S=e=>{j.visible=e},H=()=>{g&&(clearTimeout(g),g=null),y&&(clearTimeout(y),y=null)},I=e=>{H();const t=null!=e?e:j.showDelay;t>0?g=setTimeout((()=>{S(!0)}),t):S(!0)},q=e=>{H();const t=null!=e?e:j.hideDelay;t>0?y=setTimeout((()=>{S(!1)}),t):S(!1)},z=e=>{Object.assign(j,e),w?(e&&w.setOptions(e),w.update()):f((()=>R()))},C=()=>{G.value&&w&&"close"===j.scrollStrategy&&q(0)},G=n((()=>!j.disabled&&!!j.visible));c(G,(()=>z()));const U=e=>{switch(e.stopPropagation(),e.type){case"click":G.value?q():I();break;case"contextmenu":e.preventDefault(),G.value?q():I();break;case"mouseenter":case"focus":I();break;case"mouseleave":case"blur":q()}},Z=e=>{switch(e.type){case"click":e.stopPropagation();break;case"mouseenter":j.allowEnter&&y&&(clearTimeout(y),y=null);break;case"mouseleave":j.allowEnter&&"hover"===j.trigger&&q()}},$={click:["click"],focus:["focus","blur"],hover:["mouseenter","mouseleave"],contextmenu:["contextmenu"],manual:[]},B=["mouseenter","mouseleave","click"];return c((()=>j.trigger),((e,t)=>{const o=v.value,l=b.value;if(($[t]||[]).forEach((e=>a(o,e,U))),B.forEach((e=>a(l,e,Z))),"manual"!==e){$[e].forEach((e=>r(o,e,U))),B.forEach((e=>r(l,e,Z)))}})),c(v,((e,t)=>{($[j.trigger]||[]).forEach((o=>{a(t,o,U),r(e,o,U)}))}),{flush:"post"}),c(b,((e,t)=>{"manual"!==j.trigger&&B.forEach((o=>{a(t,o,Z),r(e,o,Z)}))}),{flush:"post"}),{triggerRef:o,overlayRef:p,arrowRef:m,initialize:R,show:I,hide:q,update:z,destroy:()=>{A&&A(),w&&(w.destroy(),w=null,a(window,"scroll",C))},id:t("ix-overlay"),visibility:G,triggerEventHandler:U,overlayEventHandler:Z}};o.oneOf(["click","hover","focus","contextmenu","manual"]),o.oneOf(["auto","auto-start","auto-end","top","left","bottom","right","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end"]);export{A as u};
