import{H as h,D as z,K as c,N as s,X as w,k as U,aw as D,F as J,y as P,v as K,e as B,U as j,G as E}from"./vendor.01b03999.js";import{c as d,e as T,Q as N,u as G,aa as V,T as q,j as _}from"./index.b0bc66d4.js";import{a as A}from"./index.acc0e15a.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const b=Symbol("paginationToken");/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const H={pageIndex:d.number.def(1),pageSize:d.number,disabled:d.bool.def(!1),itemRender:d.func(),pageSizes:d.arrayOf(Number),showQuickJumper:d.bool,showSizeChanger:d.bool,showTitle:d.bool,showTotal:d.bool,simple:d.bool,size:d.oneOf(["medium","small"]),total:d.number.def(0),totalRender:d.func(),"onUpdate:pageIndex":d.emit(),"onUpdate:pageSize":d.emit(),onChange:d.emit()},L={disabled:d.bool,index:d.number,type:d.oneOf(["page","prev","next","prev5","next5"]).isRequired},X={prev:"left",next:"right",prev5:"double-left",next5:"double-right",page:""},W={next:1,prev:-1,prev5:-5,next5:5};var k=h({props:L,setup(e){const{props:n,slots:t,config:i,locale:r,activeIndex:l,onPageIndexChange:o}=z(b),a=c(()=>l.value===e.index),u=c(()=>e.disabled||n.disabled),p=c(()=>{var g;return(g=n.showTitle)!=null?g:i.showTitle}),v=c(()=>{var g,x;return(x=(g=t.item)!=null?g:n.itemRender)!=null?x:i.itemRender}),m=c(()=>({"ix-pagination-item":!0,"ix-pagination-item-active":a.value})),C=c(()=>{if(!p.value)return;const{type:g,index:x}=e;return g==="page"?x.toString():r.value[g]}),F=()=>{if(u.value)return;const{type:g,index:x}=e;let f;g==="page"?f=x:f=l.value+W[g],o(f)};return()=>{const{index:g,type:x}=e,f=u.value,O=a.value,M=v.value;let S;const R=X[x],y={mode:"text",size:"small",shape:"circle"};e.type==="prev5"||x==="next5"?S=s("span",{class:"ix-pagination-item-jumper"},[s(T,w(y,{icon:R,disabled:f}),null),s(T,w(y,{class:"ix-pagination-item-ellipsis",icon:"ellipsis",disabled:f}),null)]):U(g)?S=s(T,w(y,{icon:R,disabled:f}),null):S=s(T,w(y,{icon:R,disabled:f}),{default:()=>[g]});const Q=M?M({index:g,type:x,active:O,disabled:f,original:S}):S;return s("li",{class:m.value,title:C.value,onClick:F},[Q])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function $(e){const{activeIndex:n,onPageIndexChange:t}=z(b);return D(r=>{const l=r.target,o=Math.floor(q(l.value,n.value));t(o),e&&(l.value="")},["enter"])}var Y=h({setup(){const{props:e,config:n,locale:t}=z(b),i=c(()=>{var l;return(l=e.size)!=null?l:n.size}),r=$(!0);return()=>{const{disabled:l}=e,{jumpTo:o,page:a}=t.value;return s("li",{class:"ix-pagination-jumper"},[o,s(N,{disabled:l,size:i.value,onKeydown:r},null),a])}}}),Z=h({setup(){const{props:e,config:n,locale:t,activeSize:i,onPageSizeChange:r}=z(b),l=c(()=>{var u;return(u=e.size)!=null?u:n.size}),o=c(()=>{var u;return(u=e.pageSizes)!=null?u:n.pageSizes}),a=c(()=>o.value.map(u=>({value:u,label:`${u} ${t.value.itemsPerPage}`})));return()=>s("li",{class:"ix-pagination-sizes"},[s(A,{disabled:e.disabled,options:a.value,size:l.value,value:i.value,onChange:r},null)])}}),ee=h({setup(){const{props:e,config:n,activeIndex:t,activeSize:i}=z(b),r=ne(e,t,i),l=c(()=>{var a;return(a=e.showQuickJumper)!=null?a:n.showQuickJumper}),o=c(()=>{var a;return(a=e.showSizeChanger)!=null?a:n.showSizeChanger});return()=>s(J,null,[r.value.map(a=>s(k,w({key:a.type+"-"+a.index},a),null)),o.value?s(Z,null,null):null,l.value?s(Y,null,null):null])}});const ne=(e,n,t)=>c(()=>{const i=Math.ceil(e.total/t.value);return te(n.value,i)}),te=(e,n)=>{let t;n<=9?t=I(1,n):t=ae(e,n);const i={type:"prev",disabled:e===1},r={type:"next",disabled:e===n};return[i,...t,r]},I=(e,n)=>{const t=[];for(let i=e;i<=n;i++)t.push({index:i,type:"page"});return t},ae=(e,n)=>{let t=[];const i={type:"prev5"},r={type:"next5"};e<5?t=[...I(2,5),r]:e<n-3?t=[i,...I(e-2,e+2),r]:t=[i,...I(n-4,n-1)];const l=I(1,1),o=I(n,n);return[...l,...t,...o]};var le=h({setup(){const{props:e,config:n,activeIndex:t,activeSize:i}=z(b),r=c(()=>{var p;return(p=e.size)!=null?p:n.size}),l=P(0),o=P(!1),a=P(!1);K(()=>{const p=Math.ceil(e.total/i.value);l.value=p,o.value=t.value===1,a.value=t.value===p});const u=$(!1);return()=>s(J,null,[s(k,{disabled:o.value,type:"prev"},null),s("li",{class:"ix-pagination-item"},[s(N,{disabled:e.disabled,size:r.value,value:t.value.toString(),onKeydown:u},null),s("span",{class:"ix-pagination-item-slash"},[B("/")]),s("span",null,[l.value])]),s(k,{disabled:a.value,type:"next"},null)])}}),ie=h({setup(){const{props:e,slots:n,config:t,locale:i,activeIndex:r,activeSize:l}=z(b),o=c(()=>{var u,p;return(p=(u=n.total)!=null?u:e.totalRender)!=null?p:t.totalRender}),a=c(()=>{const u=r.value,p=l.value,v=(u-1)*p+1,m=Math.min(u*p,e.total);return[v,m]});return()=>{const{total:u}=e,{totalPrefix:p,totalSuffix:v}=i.value,m=o.value,C=m?m({total:u,range:a.value}):`${p} ${u} ${v}`;return s("li",{class:"ix-pagination-total"},[C])}}}),se=h({name:"IxPagination",props:H,setup(e,{slots:n}){const t=G("pagination");re(e,n,t);const i=c(()=>{var a;return(a=e.showTotal)!=null?a:t.showTotal}),r=c(()=>{var a;return(a=e.simple)!=null?a:t.simple}),l=c(()=>{var a;return(a=e.size)!=null?a:t.size}),o=oe(e,r,l);return()=>s("ul",{class:o.value},[i.value?s(ie,null,null):null,r.value?s(le,null,null):s(ee,null,null)])}});const oe=(e,n,t)=>c(()=>({"ix-pagination":!0,"ix-pagination-disabled":e.disabled,"ix-pagination-simple":n.value,[`ix-pagination-${t.value}`]:!0})),ue=(e,n)=>e>n?n:e<1?1:e,re=(e,n,t)=>{const i=V("pagination"),r=c(()=>{var v;return(v=e.pageSize)!=null?v:t.pageSize}),l=P(r.value),o=P(e.pageIndex),a=c(()=>Math.ceil(e.total/l.value)),u=v=>{const m=ue(v,a.value);m!==o.value&&(o.value=m,_(e["onUpdate:pageIndex"],m),_(e.onChange,m,l.value))},p=v=>{l.value=v,_(e["onUpdate:pageSize"],v),_(e.onChange,o.value,v)};j(r,v=>l.value=v),j(()=>e.pageIndex,v=>o.value=v),j([o,a],([v,m])=>{v>m&&u(m)},{immediate:!0}),E(b,{props:e,slots:n,config:t,locale:i,activeIndex:o,activeSize:l,onPageIndexChange:u,onPageSizeChange:p})};/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const pe=se;export{pe as I};
